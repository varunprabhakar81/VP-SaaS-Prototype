<div class  "page-header" > 
	<h1>User Management</h1>
</div>

<br>

<div class = "jumbotron text-center" ng-show="management.loading">
	<span class = "glymphicon glymphicon-repeat spinner"></span>
	<p>Loading...</p>

</div>
<br>

<div class="showmore">
	<div class="col-lg-6">
		<div class="input-group">
			<span class="input-group-text"> Results to display:</span>
			<input type="text" class="form-control" ng-model="number">&nbsp&nbsp
			<button type="button" ng-click="management.showMore(number);" class="btn btn-success ">Apply Filter</button>
			<button type="button" ng-click="management.showAll(number);" class="btn btn-warning">Show All</button>
		</div>
	</div>
</div>

<br>

<nav class="navbar navbar-light">
  <form class="form-inline">
    <input class="form-control mr-sm-2" type="search" placeholder="Search for..." aria-label="Search" ng-model="searchKeyword">
    <button class="btn btn-outline-secondary my-2 my-sm-0" type="submit" ng-click="management.search(searchKeyword, number);">Search</button>&nbsp
    <button class="btn btn-outline-secondary my-2 my-sm-0" type="button" ng-click="management.clear();">Clear</button>&nbsp
    <!-- Advanced Search Button -->
    <a href="/search">
        <button type="button" class="btn btn-outline-secondary my-2 my-sm-0">Advanced Search</button>
    </a>
  </form>
</nav>

<br>

<!-- Total Search Results -->
<div ng-show="searchFilter !== undefined">
    <p><strong>Total results: </strong>{{ (management.users | filter: searchFilter).length }}</p>

</div>

<!-- Results Being Shown -->
<div ng-show="searchFilter !== undefined">
    <p><strong>Showing: </strong>{{( management.users | filter: searchFilter | limitTo: management.limit).length }}</p>
</div>



<!-- Custom Error Message -->
<div class="row show-hide-message" ng-show="management.showMoreError">
	<div class="alert alert-danger">{{ management.showMoreError }}</div>
</div>

<br>
<br>

<div class="panel panel-primary">
<!-- 	<div class="panel-heading">
		<strong>User Management</strong>
	</div> -->
	<table class="table table-striped">
		<tr>
			<th>Name</th>
			<th>Username</th>
			<th>Email</th>
			<th>Permission</th>
			<th></th>	
		</tr>
		<tr ng-repeat="person in management.users |filter: searchFilter |limitTo: management.limit">
			<td>{{person.name }}</td>
			<td>{{person.username}}</td>
			<td>{{person.email}}</td>
			<td>{{person.permission}}</td>
			<td>
				<a href="/edit/{{person._id}}">
					<button type="button" ng-show="management.editAccess" class="btn btn-primary">Edit</button>
				</a>
				<button type="button" ng-click="management.deleteUser(person.username);" ng-show="management.deleteAccess" class="btn btn-danger">Delete</button>
			</td>
		</tr>
	</table>

</div>


<br>
<div class="showmore">
	<div class="col-lg-6">
		<div class="input-group">
			<span class="input-group-text"> Results to display:</span>
			<input type="text" class="form-control" ng-model="number">&nbsp&nbsp
			<button type="button" ng-click="management.showMore(number);" class="btn btn-success ">Apply Filter</button>
<button type="button" ng-click="management.showAll(number);" class="btn btn-warning">Show All</button>
		</div>
	</div>
</div>
